/**
 *
 */
package rocks.inspectit.server.anomaly._a;

import java.lang.reflect.Field;
import java.util.ArrayList;
import java.util.List;

import org.apache.commons.lang.ArrayUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.google.common.base.Stopwatch;

import rocks.inspectit.server.anomaly.forecast.impl.HoltWintersForecast;

/**
 * @author Marius Oehler
 *
 */
public class Test {

	static int seasonLength = 25;

	// static double[] testData = new double[] { 0.383883163, 0.671368744, 1.063127297, 1.149054597,
	// 1.524686844, 1.729106432, 2.221024909, 1.670177554, 2.075553057, 1.662897576, 1.722278748,
	// 1.510476653, 1.667301378, 1.233665618, 1.214907882, 1.322136357, 1.306810661, 1.107114372,
	// 0.54922099, 0.785557551, 0.782871682, 1.007776776, 1.036093841, 1.72961018, 2.088880645,
	// 2.491384054, 2.926349288, 3.057037894, 3.490910748, 3.378760915, 3.351111917, 3.483383824,
	// 3.531106038, 3.824265769, 3.517884675, 3.529450101, 3.593109696, 3.473251294, 3.748021142,
	// 2.989719433, 2.610826984, 3.371700999, 2.182235701, 2.415582664, 2.639873847, 2.819542333,
	// 2.739539136, 3.46356036, 3.871094439, 3.895753693, 5.472990928, 4.218407217, 5.184826806,
	// 5.633679518, 5.235422746, 5.757848958, 5.46131412, 5.561475511, 5.482804911, 5.509084955,
	// 5.568118201, 5.053184873, 6.013075207, 5.161537041, 4.807314599, 4.881644339, 5.28987261,
	// 4.964680511, 5.152032699, 4.833530449, 4.709055359, 5.215351399, 5.470215748, 5.303388882,
	// 5.895386347, 7.017462588, 6.652106447, 6.659912801, 7.450187831, 7.003096937, 7.218758186,
	// 7.058204281, 7.211860197, 7.324019622, 8.109132481, 6.771036833, 6.985217531, 7.005595879,
	// 6.411924187, 6.585013163, 7.01509737, 6.945345447, 5.953949375, 6.559707573, 6.591174116,
	// 6.740839317, 6.798220625, 6.478788781, 8.10402548, 8.350878497, 10.40451967, 8.218756938,
	// 8.91288471, 9.14481191, 9.513482238, 9.692166161, 9.543984827, 9.32814443, 9.357655475,
	// 10.33899302, 10.14198604, 8.713881195, 8.653819646, 8.820885346, 8.638205736, 8.316020793,
	// 8.81961181, 8.558260552, 8.740438315, 8.867559895, 8.253862317, 8.711822968, 8.937719056,
	// 9.336532961, 9.267454113, 12.18892956, 9.780471566, 10.95401912, 10.0261622, 11.2763978,
	// 11.40313919, 11.80229172, 11.18526965, 11.7134078, 11.54269901, 12.09716044, 10.69082705,
	// 11.39745417, 10.52565637, 9.950400788, 10.65046575, 11.14853823, 10.4170848, 10.82424837,
	// 10.00926659, 10.76306663, 10.78767295, 10.21331587, 12.10286442, 11.79436277, 13.68207463,
	// 12.49416933, 12.83100874, 13.40841641, 12.53952139, 13.45749683, 13.34789273, 13.14257104,
	// 13.25287162, 13.45028667, 13.85829095, 13.41309383, 13.46852703, 12.89892466, 12.50358165,
	// 12.52105588, 11.65091552, 12.9276525, 12.91497248, 12.84694853, 12.42629015, 13.11098106,
	// 13.02126212, 12.89126504, 14.03099263, 17.34078192, 13.87045159, 14.58494753, 15.15934931,
	// 14.43300841, 15.86824037, 15.95607417, 14.42130776, 16.41391066, 15.03978834, 14.30347685,
	// 14.71394247, 14.91460013, 14.95731706, 14.22678845, 14.044884, 14.42480491, 13.7787007,
	// 13.88103912, 13.71880278, 15.32289468, 13.58172198, 14.05863212, 14.58234939, 14.77018679,
	// 19.15132972, 16.37043366, 16.27470238, 16.98765861, 17.48401037, 17.27012718, 16.7581344,
	// 17.04474542, 17.55473713, 16.14957925, 17.31980325, 17.0154894, 15.78566139, 17.38081802,
	// 16.86989925, 14.91365874, 16.32417164, 15.11253805, 16.3690401, 15.64032304, 17.33956439,
	// 16.76569638, 15.86680101, 16.92655998, 18.22196189, 22.07962615, 17.6252131, 17.73713276,
	// 17.61500468, 18.84603218, 18.39756609, 19.04239428, 18.49294845, 18.86122678, 18.3558863,
	// 18.45405269, 18.13102695, 18.07626281, 17.93581097, 18.71980153, 17.9178406, 18.99822467,
	// 17.99273317, 18.70987828, 17.70440999, 17.76224366, 18.44488065, 19.17980402, 19.16711083,
	// 20.25616774, 23.46978558, 19.73176128, 20.47189808, 19.63779431, 20.45877516, 21.05163629,
	// 19.84414303, 20.5938089, 21.43665961, 21.31955815, 21.52959954, 21.73997653, 20.40316207,
	// 20.05823509, 21.14019133, 19.95412966, 19.79764718, 19.30953405, 19.61428028, 20.42870564,
	// 19.91768507, 19.84968138, 20.62902031, 21.65875433, 21.49775753, 26.10640897, 22.60929892,
	// 22.16934943, 23.50622181, 22.99304728, 22.70547507, 23.19165363, 22.20516945, 21.88343802,
	// 22.59347859, 21.53650357, 22.39413132, 22.23943293, 22.61261817, 22.27945412, 22.42649596,
	// 21.03311666, 22.50702357, 22.0628393, 21.76974018, 21.9817837, 20.97065834, 21.44169167,
	// 22.20637959, 22.58995576, 27.28788378, 23.16943434, 23.56551925, 23.31090205, 24.45596218,
	// 25.55989568, 24.3520147, 25.31148188, 25.61276111, 23.6015606, 24.96756204, 23.54189692,
	// 24.01370299, 22.9465543, 24.82750687, 25.09870007, 23.55700889, 23.31053636, 22.15806329,
	// 24.94737831, 23.8927157, 24.1836305, 24.74234487, 24.30546922, 23.4567032, 30.40387265,
	// 26.42805715, 25.92922712, 27.08699993, 27.25137779, 25.47107441, 27.42606208, 26.62038212,
	// 26.03609907, 27.35070018, 27.82002682, 26.02796883, 25.24915728, 24.80108154, 27.18484201,
	// 25.55537796, 25.41497458, 24.84707701, 26.99801441, 24.95423172, 26.86542618, 26.33388852,
	// 26.45456418, 25.0556748, 26.37627083, 31.90744968, 26.69343847, 27.77863648, 28.45124946,
	// 27.59852018, 28.57227136, 29.32069297, 30.31569845, 29.63427319, 29.66547415, 28.49473492,
	// 28.73932061, 29.34473139, 26.82328883, 28.30168061, 27.90829872, 27.75500852, 25.84653892,
	// 26.64443436, 28.83443756, 28.90309614, 27.79120601, 27.33137566, 28.67285935, 29.50060729,
	// 33.29512966, 30.3165026, 29.11134976, 29.45241511, 31.46997561, 28.55089336, 28.97405799,
	// 30.48175867, 30.67041828, 31.72704732, 31.62718514, 31.16766598, 30.27147474, 31.00332071,
	// 29.40464868, 29.58666377, 27.85236401, 28.05621813, 29.56295221, 27.78118756, 28.00568944,
	// 31.04677496, 31.08242951, 29.79133286, 31.33844926, 37.30056426, 31.51251918, 30.32957942,
	// 31.45110005, 30.57803746, 32.8199555, 32.5703995, 32.34240031, 32.19563191, 31.5774979,
	// 33.03310803, 31.76053444, 31.50648729, 32.78671352, 32.44185855, 32.26729914, 30.33744114,
	// 33.11224675, 30.80829387, 30.02532946, 29.87291898, 31.5735308, 31.92668428, 32.98434371,
	// 33.47528718, 39.88690647, 33.77021498, 32.54946945, 32.53216171, 34.05138096, 35.24080234,
	// 33.73474845, 35.1147334, 35.61689112, 33.94532557, 34.19722303, 33.08096384, 34.4364579,
	// 32.41166147, 34.68709517, 33.14671371, 34.79004642, 33.3961547, 31.82105992, 32.80129317,
	// 34.61889815, 32.68742323, 33.01104877, 33.88897156, 35.17974294, 41.25882939, 36.35741303,
	// 35.77489302, 37.58786272, 33.90464043, 35.01424995, 36.44487216, 34.85942444, 36.32881657,
	// 38.0747286, 35.21769484, 36.53935404, 36.2046246, 35.93411408, 35.84490965, 36.03030548,
	// 37.06375378, 36.48241007, 34.36653518, 33.7688403, 35.27664629, 36.14283739, 36.74371646,
	// 34.35036753, 34.74566496, 41.70218838, 35.67622241, 38.45691004, 38.01063442, 36.91730214,
	// 38.24081964, 36.503371, 38.07239842, 37.55044499, 37.43812475, 37.50484667, 39.49563084,
	// 39.52636914, 36.33439148, 36.58024381, 36.33478028, 35.83357444, 36.27807894, 39.34448178,
	// 35.57776324, 36.37295355, 37.94851249, 37.59155227, 39.30234119, 36.98507446, 46.57221409,
	// 37.82628569, 39.34693174, 40.11230514, 39.43290172, 39.57548499, 40.10999562, 40.75872234,
	// 38.00441482, 41.42427691, 40.33623408, 37.6838421, 39.36667167, 40.43720064, 38.34896498,
	// 38.63325843, 40.18270834, 40.83891725, 39.65363898, 37.77167782, 40.13221128, 41.32126457,
	// 38.54346297, 40.69163002, 37.99211916, 45.96298118, 39.98261525, 39.85617421, 40.42620581,
	// 41.18905004, 41.30331064, 41.211494, 40.89856333, 40.19894719, 42.39501994, 42.86316109,
	// 41.28796174, 43.06081917, 41.68228526, 41.25958488, 42.45033822, 42.07756637, 41.26912631,
	// 39.5383929, 43.13494058, 40.04215197, 39.3740443, 41.90494767, 42.04485751, 43.48192421,
	// 48.33500603, 42.1216934, 43.11096575, 42.33623861, 42.86960431, 41.64556101, 44.65449649,
	// 44.24387157, 43.27495708, 42.03103066, 45.07915171, 43.09684734, 43.74141313, 44.95762768,
	// 42.34955692, 41.84629624, 41.54734139, 41.79134044, 42.02466087, 42.89241752, 43.96253816,
	// 44.59427262, 42.73499293, 42.31272242, 43.86043861, 54.40494619, 45.36042918, 44.78153398,
	// 44.78942032, 46.80747167, 45.33607717, 44.34440306, 43.70041925, 46.67665712, 44.01970845,
	// 44.34391643, 46.0788817, 44.20511427, 46.70499937, 44.24081979, 43.1781314, 45.86593683,
	// 44.80017808, 43.95844705, 43.10491795, 44.39570117, 45.25629823, 43.74157073, 45.81794349,
	// 45.12183512, 56.24346815, 45.32606449, 46.32761322, 49.59544115, 47.40640858, 48.64688047,
	// 47.04058825, 47.01145928, 45.7317623, 47.30742662, 49.18848499, 48.18054838, 49.51908356,
	// 44.98940889, 47.59256094, 47.20345145, 46.36577628, 47.05420593, 45.2218457, 46.81562584,
	// 47.95196075, 45.57657663, 48.21589346, 46.10859371, 48.35676645, 55.67052706, 49.94488407,
	// 47.543978, 48.59218339, 47.30284431, 51.01663247, 48.33052101, 48.47479378, 49.73510253,
	// 50.03174536, 47.23770574, 48.00336786, 48.15334562, 48.26569014, 49.3000576, 51.13500383,
	// 48.65579649, 50.29238178, 46.35250848, 50.66059477, 50.57505807, 50.68375974, 47.74613347,
	// 47.51578117, 48.77820481, 60.85041692, 50.14566164, 50.36480311, 48.77203487, 52.02690948,
	// 49.37015851, 49.21959603, 53.30769233, 52.46479177, 49.7859491, 52.57098574, 52.23232647,
	// 52.71353617, 51.00465258, 48.80269287, 50.0947394, 49.22519927, 50.509856, 47.7631325,
	// 48.75658409, 48.72150804, 51.40176532, 52.75072532, 50.24747632, 51.21697953, 59.13834903,
	// 50.25267501, 52.31454982, 55.36195939, 55.70316503, 52.7567414, 51.74904931, 50.83263177,
	// 54.03050187, 54.16662036, 54.21949215, 54.42645552, 52.97250075, 55.08372652, 51.19373434,
	// 53.13929303, 53.16327688, 49.52514425, 53.53220758, 51.65870023, 50.91540763, 53.95539643,
	// 54.24572545, 54.26465135, 56.04734103, 64.66862887, 53.68073708, 55.52079871, 57.08635194,
	// 54.4921858, 54.68621611, 56.94889189, 55.86675912, 57.05454145, 55.95095437, 55.11675085,
	// 52.10541645, 51.79904407, 53.95537862, 53.63102911, 51.64742126, 53.95341839, 51.20577365,
	// 53.87064123, 52.55575708, 56.62225962, 56.28461563, 52.32034044, 53.40711332, 56.16276928,
	// 65.83364257, 55.62009207, 57.55747807, 54.75758881, 57.34294366, 56.74045739, 56.95308491,
	// 56.44777955, 55.64079155, 54.31291087, 54.95890357, 59.0464954, 54.04960544, 57.29016065,
	// 54.60521745, 57.21228985, 54.25089244, 58.17313527, 58.29470054, 53.12050344, 56.71740704,
	// 55.28928075, 56.58926923, 57.89477472, 56.65338268, 68.33918597, 59.07253714, 58.4973253,
	// 61.22640018, 58.55705169, 59.28504004, 61.82815672, 55.97734181, 56.57398027, 60.74071249,
	// 59.31958813, 61.06936473, 59.75281142, 58.01662865, 61.32882605, 59.9836215, 57.007919,
	// 59.54469697, 60.65971746, 57.88822624, 58.77607257, 55.20631471, 56.15276986, 61.00857168,
	// 57.6470599, 70.89070038, 59.00606797, 57.86938588, 59.76168183, 61.79260612, 60.32136349,
	// 62.91938913, 59.92279779, 59.28870727, 64.19157115, 60.67713772, 60.92457502, 59.59355112,
	// 61.84168832, 57.79036193, 60.85433984, 62.89970889, 60.98996061, 59.82385979, 57.3212839,
	// 58.727286, 62.53533415, 61.20330538, 62.02648464, 60.6164676, 76.98234218, 59.24054098,
	// 59.0034244, 64.23849031, 61.81665274, 63.49946156, 60.49550497, 61.72899187, 60.7382555,
	// 65.17314736, 60.75337109, 63.49600548, 64.72110397, 65.03709924, 62.36782652, 61.47457186,
	// 63.05978779, 58.73257865, 62.57395758, 58.66636175, 64.29459521, 59.45935705, 63.02171371,
	// 61.24745162, 64.60018812, 75.06715881, 63.62737859, 64.46038368, 61.16365106, 67.75240291,
	// 66.77651067, 62.32381618, 65.26313781, 65.29862546, 62.45941238, 63.71674726, 66.815423,
	// 63.44130192, 66.30513764, 62.41286115, 61.48477716, 64.65250538, 62.03163252, 61.61381369,
	// 63.49796954, 66.41169189, 64.35191024, 67.43301023, 66.51737302, 63.58443728, 81.5813755,
	// 64.72257644, 63.94243433, 67.45824676, 63.54684173, 65.85546775, 67.43680104, 69.38374033,
	// 69.03661992, 65.17905396, 64.99570242, 66.165588, 64.85991449, 65.28070499, 63.38980702,
	// 64.22088895, 67.54598607, 67.679802, 63.44877474, 69.23754132, 63.06052782, 67.48649317,
	// 67.24120082, 67.3158144, 68.4530277, 78.62656168, 64.64560765, 64.9879708, 67.80970278,
	// 68.67283666, 65.41090895, 65.45160238, 69.30118313, 65.95635696, 71.44657162, 72.12028264,
	// 67.26675575, 66.3961538, 66.36868776, 66.74027351, 69.43936812, 65.61209499, 65.51035973,
	// 65.60424735, 68.28298317, 66.62619494, 66.54855314, 66.89970788, 71.59043669, 68.3651376,
	// 87.03568728, 70.62517748, 70.66058811, 72.98238995, 72.46272469, 70.09343142, 67.68427086,
	// 70.90861263, 71.06272078, 73.39133985, 73.12506495, 67.77631645, 72.97526285, 71.34577913,
	// 69.6285555, 69.63846927, 66.92538187, 67.90050593, 71.00093958, 68.34103054, 69.75433345,
	// 67.11118232, 70.90360889, 73.03106004, 67.12839838, 87.7623628, 74.22310603, 73.13466223,
	// 71.84503065, 71.11168706, 70.22427523, 71.22158357, 72.28238243, 70.13632145, 73.54371074,
	// 73.02680728, 70.09856721, 70.91882949, 74.65181346, 68.86802945, 73.85730653, 69.23143471,
	// 72.65415741, 68.88919796, 68.48029405, 70.62924396, 74.17342197, 70.70327082, 71.15919505,
	// 72.03680342, 84.31523744, 72.0467316, 73.11219662, 73.38733603, 73.40361943, 72.09703778,
	// 71.59151266, 75.47758797, 77.37024172, 72.5315319, 71.08342515, 73.26641242, 72.84214396,
	// 72.37030348, 74.038677, 74.6012913, 69.75235036, 74.58159719, 75.58730405, 70.05595688,
	// 72.7108469, 72.27624742, 76.61971525, 75.41409997, 76.72810656, 85.01602248, 75.41236372,
	// 74.69237731, 72.15169961, 73.67735456, 76.00378746, 72.70967797, 74.14959352, 77.37349631,
	// 78.36462547, 71.59212368, 79.44158037, 76.18560185, 75.33824235, 71.63941804, 71.93436916,
	// 78.81580511, 70.73966829, 74.73895571, 71.41167472, 79.25305519, 75.26722359, 73.95643482,
	// 80.05246107, 79.90678173, 91.03988564, 80.0056419, 78.4926562, 76.66851175, 74.34140547,
	// 77.51079667, 75.2665945, 76.94301904, 76.72908043, 81.5862966, 73.75359709, 76.59665037,
	// 80.75275271, 81.72481862, 75.20499362, 81.24908366, 75.05982682, 75.58210621, 77.06478911,
	// 75.66346438, 75.88343601, 76.18402694, 77.55952014, 79.98775962, 78.26237605, 91.96734783,
	// 82.46278268, 81.47910222, 79.6730644, 79.92264208, 77.75049621, 80.64299935, 78.4483651,
	// 79.41324512, 79.36934777, 78.73168803, 82.79928739, 81.38417339, 83.45122178, 83.45946444,
	// 78.97147212, 74.96159813, 81.10233461, 77.68049887, 80.035781, 74.71787868, 77.52145497,
	// 78.20287729, 80.77188242, 78.38473379, 98.64390082, 83.43989163, 83.28235387, 84.25730806,
	// 81.91809184, 84.71068647, 77.51265577, 78.56875146, 83.45052025, 80.25943376, 79.73501518,
	// 82.82345441, 81.99953196, 80.73689835, 78.88574792, 83.70342248, 81.25645268, 79.88594228,
	// 79.30465992, 81.51497722, 77.9146343, 82.07802056, 83.80878024, 82.66135102, 78.19044256,
	// 93.98895889, 86.2512175, 86.94814063, 81.86762354, 83.5419246, 80.03403832, 85.23031468,
	// 83.96855651, 82.12554122, 83.34696589, 82.44329266, 80.47079283, 83.18182163, 85.815195,
	// 81.86350782, 79.26425516, 82.27624615, 81.12325118, 84.56168461, 85.23274438, 86.66462805,
	// 79.7688893, 83.39423228, 86.80511353, 87.818976, 95.9409305, 85.26745664, 86.92347348,
	// 86.10201482, 82.81980086, 83.49519491, 81.34060616, 84.01424249, 88.40733611, 81.71090969,
	// 81.20935525, 84.77154843, 87.74364238, 80.8817357, 85.22763361, 85.91890527, 85.94191381,
	// 84.35873906, 84.2474385, 86.78079081, 88.6557657, 83.87405711, 87.07506578, 82.06241327,
	// 88.0311305, 104.5697798, 86.28409894, 85.81330258, 87.44358608, 82.99439956, 86.24877646,
	// 86.00252503, 87.98688116, 89.48168554, 83.13138831, 84.70849366, 90.69157545, 85.46708008,
	// 88.14525808, 90.89116806, 85.34593092, 87.25806071, 87.01486061, 82.4385276, 87.50199466,
	// 83.26780644, 87.12020341, 91.78119185, 89.15954082, 89.09712711, 108.9284851, 88.94538027,
	// 83.64125951, 93.12508504, 87.02997048, 84.66290351, 88.8376435, 84.83624233, 87.94250998,
	// 90.38833348, 90.37003648, 92.7481468, 84.83701964, 87.16108136, 85.38703246, 91.33165676,
	// 89.07894865, 90.35506783, 86.31277063, 88.7147046, 92.12040638, 88.38695775, 84.64425944,
	// 84.85597145, 88.68287402, 109.3405046, 93.53330506, 88.02591474, 89.83948061, 94.7447014,
	// 89.77087684, 95.54177232, 94.09856946, 89.02809334, 94.7526583, 89.53119214, 90.30856977,
	// 88.30491699, 86.49336786, 86.80748588, 91.62599744, 85.76470431, 93.07124496, 93.90734543,
	// 85.87653662, 91.84953882, 89.21169268, 93.55953864, 89.16682642, 90.98159878, 109.733025,
	// 87.66030265, 91.83830939, 95.70045731, 94.29168262, 92.68148618, 93.49051672, 97.29530808,
	// 89.61745061, 88.54731642, 97.88846354, 93.19637637, 89.59555454, 90.69639421, 91.44633573,
	// 90.41172002, 89.87131824, 89.90676815, 88.15824225, 93.85742766, 94.29479988, 90.28080662,
	// 90.7964275, 89.45992591, 90.26989318, 117.7845989, 96.69317997, 90.99018326, 91.44423748,
	// 96.09414751, 91.47652725, 100.4366996, 98.30738947, 97.48975557, 96.59386752, 95.91684076,
	// 91.14326939, 93.38097825, 98.79103792, 96.15737035, 91.97336671, 96.35335262, 96.88331551,
	// 92.86715902, 96.87792641, 96.49569341, 99.58589324, 92.91597279, 96.73043601, 97.83182163,
	// 112.8675625, 96.87310443, 94.41236357, 92.24740732, 98.25350344, 98.61443407, 94.25599268,
	// 95.31584568, 94.19043016, 92.36174521, 96.20283099, 101.9122722, 98.43969079, 91.59374883,
	// 100.9522225, 98.73438711, 94.77028942, 91.4310458, 100.7077965, 97.77420314, 93.5356222,
	// 94.74128398, 94.22925159, 101.2733987, 101.619228, 113.2547738, 97.55701558, 100.529615,
	// 98.86846908, 95.84290698, 97.60131675, 98.43808261, 100.5227341, 101.0868522, 95.51999759,
	// 101.6917887, 93.94213138, 102.2964099, 99.13575157, 95.55706921, 101.5444379, 102.4824578,
	// 98.05835082, 92.98536817, 100.6971461, 94.11298915, 98.51429492, 99.20193941, 102.0509032,
	// 102.5896305, 116.8397614, 99.06320548, 97.10492522, 101.0718381, 103.2174522, 101.2462584,
	// 98.65924004, 104.2066696, 102.3029799, 103.8097248, 99.30887775, 104.0404174, 97.01177104,
	// 101.2649128, 95.56658051, 102.0006102, 103.0504946, 104.7402015, 104.1675045, 104.3139353,
	// 95.84572053, 99.72553019, 105.5464888, 97.72479, 98.89819699, 125.5324298, 105.7848069,
	// 101.5665889, 105.7234908, 97.97251964, 105.8293639, 98.41119571, 105.5130729, 102.9526415,
	// 103.0551228, 102.3614117, 99.71663433, 105.3524523, 106.8538157, 101.4095696, 104.4063234,
	// 98.76901153, 106.1081993, 105.6072978, 101.3869601, 101.5755624, 101.3179617, 98.05623623,
	// 102.9530735, 100.9406482, 127.3469385, 103.8300803, 108.5034864, 108.518837, 101.5506299,
	// 99.30638177, 105.8364035, 103.1128932, 103.1946102, 100.0819497, 105.7772337, 106.1150676,
	// 104.9536062, 103.2870767, 100.2975934, 108.9276094, 107.072784, 101.8838663, 101.6816249,
	// 106.6824498, 100.8621147, 99.74307862, 103.9312002, 100.7270286, 106.9962657, 125.9850381,
	// 108.2697849, 100.5110622, 102.09073, 102.3223226, 109.5164518, 105.9481315, 104.6582594,
	// 101.6196196, 110.4588703, 110.9724391, 102.0472305, 109.8854501, 100.2703183, 108.3058374,
	// 106.5517923, 110.0497602, 103.0261955, 102.3693132, 105.1848216, 110.0409191, 101.1829225,
	// 106.5494351, 106.6494136, 110.1653339, 128.1261222, 107.888241, 113.3717719, 109.309644,
	// 112.7045649, 107.2508523, 109.5584848, 111.0668352, 102.9180266, 109.5677211, 110.4718646,
	// 105.2103184, 112.4879116, 108.2555076, 110.5752795, 103.4301739, 106.1595412, 104.1940236,
	// 109.3687063, 105.5555238, 107.7437807, 105.1678679, 102.4409409, 109.8216855, 109.7435431,
	// 134.4517275, 113.5743628, 105.2561776, 114.9903793, 105.7461084, 108.1135707, 105.5297977,
	// 108.0565859, 107.6483875, 112.2334122, 107.3652398, 108.5803655, 107.0424654, 107.1200609,
	// 111.6289863, 108.6586932, 107.710511, 104.0286566, 104.2231529, 113.2575961, 113.8924584,
	// 106.1234717, 110.3846371, 109.2422402, 112.1352854, 139.2128192, 108.1898346, 110.6513042,
	// 116.45619, 113.2156266, 108.6688422, 116.4826513, 117.2041985, 110.8787477, 113.7396927,
	// 110.03264, 116.3689607, 116.5865074, 105.7903158, 110.5216905, 115.5796162, 107.7449305,
	// 110.1765654, 105.7949036, 105.8587696, 114.5313805, 111.5913835, 109.773486, 107.4862183,
	// 113.9362519, 137.2929792, 108.5167824, 113.7101526, 108.770603, 115.5717043, 116.3546809,
	// 117.3747838, 109.5377314, 114.0489239, 110.9830518, 113.2008189, 119.1546503, 111.7906097,
	// 116.1897712, 112.2238917, 115.5107651, 107.8189169, 117.5473757, 114.4200869, 110.059064,
	// 115.9143049, 107.4070179, 116.0604557, 110.4877824, 118.601736, 135.4967085, 112.3277494,
	// 109.4800235, 111.0372996, 121.6040578, 112.7498219, 109.9229793, 118.9145074, 119.7749965,
	// 118.1843575, 115.4343083, 115.0345712, 121.7511834, 114.7278064, 116.3049751, 109.6365324,
	// 115.9257238, 119.0950436, 116.3984489, 115.7265177, 113.5605565, 120.0186346, 121.4459241,
	// 113.9693782, 119.1079808, 143.9851632, 113.736948, 121.71006, 115.3141005, 120.2110717,
	// 119.3476576, 122.0526745, 111.6349225, 114.8370203, 115.5037425, 113.2772175, 119.2239167,
	// 122.2048794, 119.5137659, 113.8700254, 118.096096, 115.0326098, 118.1859784, 111.406237,
	// 114.9650512, 120.8970982, 112.8361944, 113.0447874, 118.7559818, 120.0161598, 139.5799016,
	// 115.0390345, 123.6048296, 114.1256574, 115.9646842, 115.6885497, 119.1639143, 124.156368,
	// 122.3316658, 123.9876662, 115.1055411, 114.4037628, 125.375062, 116.6593487, 114.5990256,
	// 120.4644234, 115.7085269, 119.1243774, 122.0329677, 115.4288613, 113.7622232, 117.1071064,
	// 119.3921833, 122.411335, 114.6406944, 140.2094635, 117.6810634, 121.0939033, 121.8042978,
	// 123.3636736, 117.3978026, 118.6448753, 123.2462641, 115.8893493, 127.623701, 119.536205,
	// 116.8141333, 120.4166906, 123.4148663, 118.2020426, 125.4777758, 123.3067881, 118.103128,
	// 123.9532252, 122.8634549, 123.1632762, 122.2312691, 125.3108839, 120.6963348, 123.6582987,
	// 147.0367694, 117.8032924, 126.3922754, 120.6288753, 118.5935872, 127.4341199, 123.184999,
	// 129.9658325, 124.3286207, 122.1706712, 123.6155077, 123.398537, 124.310126, 122.0470257,
	// 122.6510895, 118.1659686, 123.9260873, 121.2319896, 128.9827623, 126.0698894, 117.6204946,
	// 116.5327574, 127.889363, 129.0607104, 117.4802693, 146.2687416, 120.202442, 124.6723147,
	// 122.0731532, 131.414227, 129.0923015, 129.078987, 127.3158267, 122.1080179, 126.0581015,
	// 130.547108, 127.4160531, 126.7015756, 122.2061608, 124.3769472, 131.1481102, 124.418081,
	// 129.4367218, 129.2226788, 124.3994754, 130.6944582, 126.0660963, 121.0283479, 128.9389446,
	// 131.8570067, 147.7120444, 125.2458764, 123.6996618, 129.7667386, 128.0877267, 124.0084411,
	// 129.6202398, 131.974396, 127.1345554, 122.2196873, 120.8218201, 124.43554, 124.6753778,
	// 121.1568031, 126.2359067, 132.683077, 121.1557416, 128.6973654, 132.5105302, 122.6317866,
	// 120.201997, 131.6090915, 127.7684982, 125.0157233, 131.2013406, 148.9647275, 131.2199026,
	// 131.2235991, 124.3989438, 132.9781078, 124.3853731, 123.2470144, 134.9291845, 128.1380412,
	// 130.749578, 127.0045333, 134.6848367, 133.5943379, 125.2505702, 127.1509544, 123.8675557,
	// 123.0524089, 124.8863127, 126.8826242, 123.0486991, 125.46825, 133.5328206, 123.8228096,
	// 133.1761258, 130.1576975, 152.5178181, 129.7236786, 127.339311, 124.4735327, 127.414548,
	// 133.3151945, 131.071984, 128.8156785, 137.3260008, 127.2149672, 131.8319597, 130.5302426,
	// 133.2233625, 132.7177177, 130.117809, 130.83872, 127.8975657, 126.18482, 129.7783237,
	// 136.2422924,
	// 129.0338206, 132.9090478, 136.6965117, 136.9957936, 125.5523805, 154.5760242, 130.8771796,
	// 136.248239, 131.5620411, 137.2199137, 128.203288, 129.9228886, 126.7660767, 129.0513886,
	// 131.3496381, 128.0419532, 130.3565797, 128.7396959, 135.6837759, 138.2441235, 137.6645774,
	// 132.5161967, 125.2453538, 125.2605607, 131.1055301, 134.7929497, 133.7889132, 126.3883703,
	// 135.0695878, 136.780892, 152.7807512, 137.0741627, 136.8226884, 140.4323024, 132.7784965,
	// 134.2057494, 135.2724909, 140.6173599, 136.2806946, 127.9026451, 131.1358639, 140.8521086,
	// 140.4951682, 133.935763, 139.2254312, 137.6954708, 133.2664084, 127.7323587, 128.9258921,
	// 134.3007471, 137.9095635, 135.8047715, 129.0326081, 136.8372372, 142.6052454, 157.2440381,
	// 132.6113565, 130.5294943, 136.5338076, 136.0522319, 138.6900485, 132.6202119, 137.9046262,
	// 137.9645347, 138.0397634, 130.0300063, 142.6505054, 139.8746188, 136.263057, 135.3006441,
	// 141.6075601, 132.1279543, 140.8156513, 131.9253389, 135.4760343, 131.1599098, 143.2159594,
	// 137.2797885, 140.5696071, 134.6241575, 167.9638516, 136.4843541, 137.4392404, 140.887767,
	// 143.6400223, 138.2975939, 137.761034, 137.1786823, 144.8897671, 138.9348913, 145.6494002,
	// 144.3884992, 135.0530232, 143.706075, 138.3884506, 141.6280994, 131.057412, 143.2377605,
	// 141.6824158, 137.1865707, 138.2801704, 145.819805, 133.3054511, 142.1895407, 143.0333481,
	// 171.0756172, 132.6765336, 135.3125658, 142.7554159, 137.4118388, 143.3168073, 145.3904177,
	// 144.586408, 147.0516061, 145.6234463, 145.9255877, 139.0572385, 136.0586282, 143.692204,
	// 145.142326, 142.3366862, 138.1450697, 137.8228516, 133.7625448, 136.6769024, 132.6481471,
	// 134.9761611, 135.3796107, 142.6129821, 140.4453158, 177.6214945, 147.012281, 146.9463859,
	// 144.6642799, 143.2662887, 137.9620078, 149.7433794, 149.0649858, 142.7587384, 148.6694192,
	// 142.2026592, 140.2683966, 134.9668801, 143.2783499, 143.1098892, 141.8733591, 138.9784371,
	// 135.3917785, 149.0594523, 140.2414387, 146.5648729, 146.1577323, 138.9366495, 139.9130354,
	// 146.3027927, 165.4846511, 140.0052028, 144.1828727, 141.4739816, 140.285073, 140.9033566,
	// 141.2673349, 145.2249365, 146.1189692, 139.4846151, 149.0088676, 139.2007081, 147.6170977,
	// 139.9222175, 145.8680017, 140.6498978, 144.8026476, 140.545585, 139.6401882, 142.7105896,
	// 144.9093705, 141.904215, 141.6111681, 150.3162805, 139.5524051, 182.2992719, 149.1016608,
	// 140.6041875, 152.7353379, 146.8247648, 150.4630645, 149.8561403, 147.8186636, 143.1673294,
	// 149.1559934, 141.5118693, 141.4427094, 148.9051235, 150.5795776, 141.7473994, 146.0611524,
	// 140.8983549, 149.2840078, 142.8312262, 145.2379698, 141.0185515, 153.1331555, 149.1522828,
	// 138.3320484, 142.2297068, 183.1095013, 153.8878988, 145.8629785, 150.8331609, 145.6336589,
	// 143.2373065, 151.7942976, 148.3883484, 152.6247086, 153.7426037, 146.4950832, 151.3516641,
	// 151.0659466, 151.3095564, 151.6047067, 148.033554, 148.8354649, 145.3956806, 148.0303626,
	// 145.0217511, 150.3934459, 154.7598199, 154.8879796, 149.5380167, 144.6144104, 183.3365552,
	// 142.9164488, 146.7765357, 149.7919988, 152.7563592, 151.3143098, 143.313781, 151.1154686,
	// 150.6582721, 144.0609998, 145.9971586, 151.1869396, 149.1215056, 155.1330148, 149.5109623,
	// 148.1866171, 149.8489784, 143.6964128, 149.3982655, 144.8896363, 148.5326219, 150.7465559,
	// 143.1383359, 150.9375432, 147.9059517, 176.592286, 157.4465478, 145.4362226, 158.1312061,
	// 150.8224201, 148.9395014, 155.2685556, 155.7514522, 148.5203764, 153.43767, 158.2286855,
	// 145.3811981, 146.9342978, 145.2860492, 157.8367949, 144.9389495, 156.7941411, 147.7803602,
	// 158.4260407, 144.0645181, 151.5695482, 149.3368208, 145.5169427, 158.8018082, 147.9170192,
	// 188.8376253 };

	static double[] testData = new double[] { 0.011050885, 0.423989607, 0.787551089, 1.094433975, 1.239908627, 1.33042985, 1.611190397, 1.519942939, 1.715293236, 1.621481801, 1.360258502, 1.248518947,
			1.106743898, 0.953815672, 0.83815095, 0.524568641, 0.563400532, 0.527431031, 0.532131678, 0.657948516, 0.644249076, 0.836933483, 1.116888429, 1.327385917, 1.800262122, 2.83819393,
			2.344103712, 2.508529219, 2.745937248, 3.228211949, 3.393056844, 3.503358759, 3.702474979, 3.617919607, 3.438868873, 3.364457244, 3.196479116, 3.089452575, 2.827022114, 2.528520468,
			2.607407234, 2.330054568, 2.51907153, 2.19479082, 2.579678089, 2.556452811, 2.595293594, 3.094766132, 3.366203368, 3.724685081, 5.877655158, 4.147765612, 4.580197209, 4.933012154,
			5.151789392, 5.245271515, 5.579986755, 5.5785432, 5.242634803, 5.269609632, 5.091332273, 5.146104809, 5.053007812, 4.461444784, 4.819270025, 4.458501489, 4.291507759, 4.231002971 /** 12 */
			, 4.280149498, 4.016090329, 4.66414282, 4.940209546, 5.07090596, 5.034542664, 5.771925928, 8.958108237, 6.214385245, 6.215490896, 6.695879299, 7.238251211, 7.430570565, 7.556681665,
			7.401886064, 7.477694027, 7.164189209, 6.790458813, 6.845984661, 6.753890304, 6.741695578, 6.369360034, 6.438200367, 6.334129475, 5.803740477, 5.999597182, 5.98404337, 6.70901441,
			6.545903031, 6.6527335, 7.013847125, 7.224993661, 11.98015897, 7.640457472, 8.70599291, 8.431378071, 8.609357583, 9.087630521, 8.698166589, 8.965978931, 8.823384215, 9.039929094,
			8.956269691, 9.090374047, 8.617319729, 8.453924184, 8.600866797, 8.470990627, 8.579816142, 7.979368298, 8.241254419, 8.362622919, 8.769876408, 8.11277595, 8.472027669, 9.100397409,
			9.149233752, 15.00686374, 10.29077158, 9.778317575, 10.65492756, 11.03560484, 10.475179, 10.74388058, 11.63753151, 11.369296, 11.66829756, 10.83882574, 11.12708393, 11.17429834,
			10.04112031, 10.20294367, 10.42111922, 10.34935975, 9.955355498, 10.18927788, 9.889611051, 10.38733966, 10.62925256, 10.39562833, 11.20503153, 10.65286948, 16.95364412, 11.90336514,
			11.69510795, 12.53926624, 12.11919334, 13.5103085, 13.50026238, 12.39189347, 12.71870367, 13.08104663, 12.89344967, 12.39163673, 12.37030334, 12.42407389, 12.59972105, 12.49986286,
			12.21923561, 11.88997203, 12.22851253, 12.19270078, 11.40780239, 12.27021854, 12.88656647, 12.66060132, 13.48555703, 20.52833831, 14.37473328, 14.11721519, 14.61782624, 15.15280233,
			15.19679735, 15.59972373, 14.29551476, 14.21014367, 15.46521232, 14.36182642, 14.4490217, 14.0855237, 14.6488705, 13.81119512, 13.89386124, 14.05585092, 13.25494469, 13.16518848,
			14.40188102, 13.28400033, 14.44865245, 14.8479892, 14.90532882, 14.83424956, 23.03210844 };

	private static double[] trainData;

	private static double[] onlineData;

	/**
	 * @param args
	 * @throws SecurityException
	 * @throws NoSuchFieldException
	 * @throws IllegalAccessException
	 * @throws IllegalArgumentException
	 */
	public static void main(String[] args) throws IllegalArgumentException, IllegalAccessException, NoSuchFieldException, SecurityException {

		trainData = new double[2 * seasonLength];
		onlineData = new double[testData.length - trainData.length];

		System.arraycopy(testData, 0, trainData, 0, trainData.length);
		System.arraycopy(testData, trainData.length, onlineData, 0, onlineData.length);

		// trainandtest();

		// iterativeAdaption();

		onlyTrainOnce();

		// fullTrain();
		// sdg();
	}

	private static void sdg() {
	}

	public static HoltWintersForecast getHoltWinters(double x, double y, double z) {
		HoltWintersForecast forecast = new HoltWintersForecast(x, y, z, seasonLength);

		try {
			Logger logger = LoggerFactory.getLogger(forecast.getClass());

			Field field = forecast.getClass().getDeclaredField("log");
			field.setAccessible(true);
			field.set(forecast, logger);

			return forecast;
		} catch (NoSuchFieldException | SecurityException | IllegalArgumentException | IllegalAccessException e) {
			return null;
		}
	}

	private static double[] findParameter(double stepSize, double[] data) {
		Stopwatch stopwatchTotal = new Stopwatch();
		stopwatchTotal.start();

		double rmse = Double.MAX_VALUE;
		double alpha = 0, beta = 0, gamma = 0;

		// find smallest
		HoltWintersForecast holtWinters = null;
		for (double x = 0; x <= 1; x += stepSize) {
			for (double y = 0; y <= 1; y += stepSize) {
				for (double z = 0; z <= 1; z += stepSize) {
					holtWinters = getHoltWinters(x, y, z);

					holtWinters.train(data);

					if (holtWinters.getRootMeanSquaredError() < rmse) {
						alpha = x;
						beta = y;
						gamma = z;
						rmse = holtWinters.getRootMeanSquaredError();
					}
				}
			}
		}

		stopwatchTotal.stop();
		// System.out.println(String.format("%d\t%s", data.length, stopwatchTotal));

		return new double[] { rmse, alpha, beta, gamma };
	}

	private static void iterativeAdaption() {
		double stepSize = 0.05D;

		double[] parameter = findParameter(stepSize, trainData);

		printParameter(parameter);

		HoltWintersForecast hw = getHoltWinters(parameter[1], parameter[2], parameter[3]);
		hw.train(trainData);

		List<Double> valList = new ArrayList<>();
		for (double d : trainData) {
			valList.add(d);
		}

		for (double element : onlineData) {
			valList.add(element);
			hw.fit(element);
			double forecast = hw.forecast();
			// System.out.println(String.format("%f", forecast));

			if (hw.getSeasonIndex() == 0) {
				double[] data = ArrayUtils.toPrimitive(valList.toArray(new Double[0]));
				double[] newParameter = findParameter(stepSize, data);
				hw = getHoltWinters(newParameter[1], newParameter[2], newParameter[3]);
				hw.train(data);
				printParameter(newParameter);
			}
		}
	}

	private static void onlyTrainOnce() {
		double stepSize = 0.05D;

		double[] parameter = findParameter(stepSize, trainData);

		printParameter(parameter);

		HoltWintersForecast hw = getHoltWinters(parameter[1], parameter[2], parameter[3]);
		hw.train(trainData);

		for (double element : onlineData) {
			hw.fit(element);
			double forecast = hw.forecast();
			// System.out.println(String.format("%f", forecast));

			if (hw.getSeasonIndex() == 0) {
				System.out.println(String.format("%f", hw.getRootMeanSquaredError()));
			}
		}
	}

	private static void fullTrain() {
		double stepSize = 0.05D;

		HoltWintersForecast hw = getHoltWinters(0.05, 0, 0.85);
		hw.train(trainData);

		for (double element : onlineData) {
			hw.fit(element);
			double forecast = hw.forecast();
			System.out.println(String.format("%f", forecast));
		}
	}

	private static void printParameter(double[] p) {
		System.out.println(String.format("rmse=%f\ta=%f\tb=%f\tg=%f", p[0], p[1], p[2], p[3]));
	}

	private static void trainandtest() {
		// ****

		// SparkConf sparkConf = new SparkConf();
		// sparkConf.setMaster("local[2]"); // local, using 8 cores (you can vary the number)
		// sparkConf.setAppName("MyApp");
		// SparkContext sc = new SparkContext(sparkConf);
		//
		// List<LabeledPoint> pointList = new ArrayList<>();
		//
		// // build feature vectors
		// for (int i = 1; i < testData.length; i++) {
		// double data[] = new double[i];
		// for (int n = 0; n < i; n++) {
		// data[n] = testData[n];
		// }
		//
		// pointList.add(new LabeledPoint(testData[i], Vectors.dense(data)));
		// }
		//
		// boolean end = true;
		// if (end) {
		// return;
		// }

		// ****************

		// double[] train = new double[2 * seasonLength];
		// for (int i = 0; i < train.length; i++) {
		// train[i] = testData[i];
		// }
		//
		// holtWinters.train(train);
		//
		// for (int i = train.length; i < testData.length; i++) {
		// holtWinters.push(testData[i]);
		// System.out.println(Double.toString(holtWinters.forecast()).replace(".", ","));
		// }

		// ****************

		double stepSize = 0.1D;

		double minMse = Double.MAX_VALUE;
		double alpha = 0, beta = 0, gamma = 0;

		long ds = 0L;
		int dc = 0;

		for (double x = 0; x <= 1; x += stepSize) {
			for (double y = 0; y <= 1; y += stepSize) {
				for (double z = 0; z <= 1; z += stepSize) {
					HoltWintersForecast holtWinters = new HoltWintersForecast(x, y, z, seasonLength);

					// holtWinters._train(testData);

					long start = System.nanoTime();
					holtWinters.train(trainData);
					for (double d : onlineData) {
						holtWinters.fit(d);
					}
					long duration = System.nanoTime() - start;
					ds += duration;
					dc++;

					if (holtWinters.getRootMeanSquaredError() < minMse) {
						alpha = x;
						beta = y;
						gamma = z;
						minMse = holtWinters.getRootMeanSquaredError();
					}
				}
			}
		}

		System.out.println(">> " + ((double) ds / dc) + "ns");

		// for (double element : fc) {
		// System.out.println(Double.toString(element).replace(".", ","));
		// }
		HoltWintersForecast holtWinters = new HoltWintersForecast(alpha, beta, gamma, seasonLength);
		// holtWinters = new HoltWintersForecast(0.1D, 0.1D, 0.1D, seasonLength);

		// holtWinters.output = true;
		// holtWinters._train(testData);

		holtWinters.train(trainData);
		for (double d : onlineData) {
			holtWinters.fit(d);
			System.out.println(String.format("%f", holtWinters.forecast()));
		}

		System.out.println(String.format("alpha=%f, beta=%f, gamma=%f", alpha, beta, gamma));
		System.out.println("> mse=" + minMse);

		// ****************

		// double sl = 20;
		// double trend = 2;
		// double[] trainData = new double[40];
		//
		// for (int i = 0; i < trainData.length; i++) {
		// int x = 20;
		// double val = Math.sin(i * (2 * Math.PI / x)) + i * (trend / sl);
		// trainData[i] = val;
		// }
		// holtWinters.train(trainData);
		//
		// int len = 100;
		// double[] dataIn = new double[len];
		// double[] dataForecast = new double[len + 1];
		//
		// for (int i = trainData.length; i < trainData.length + dataIn.length; i++) {
		// int x = 20;
		// double val = Math.sin(i * (2 * Math.PI / x)) + i * (trend / sl);
		// // System.out.println(Double.toString(val).replace(".", ","));
		// holtWinters.push(val);
		//
		// dataIn[i - trainData.length] = val;
		// dataForecast[i + 1 - trainData.length] = holtWinters.forecast();
		// }
		//
		// for (int i = 0; i < dataIn.length; i++) {
		// System.out.println((dataIn[i] + "\t" + dataForecast[i]).replace(".", ","));
		// }
		// System.out.println(("\t" + dataForecast[dataForecast.length - 1]).replace(".", ","));
	}

}
