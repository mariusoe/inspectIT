<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd"
	default-autowire="autodetect">

	<bean id="methodIdentDao" class="info.novatec.inspectit.cmr.dao.impl.MethodIdentDaoImpl" />
	<bean id="methodSensorTypeIdentDao"
		class="info.novatec.inspectit.cmr.dao.impl.MethodSensorTypeIdentDaoImpl" />
	<bean id="platformIdentDao"
		class="info.novatec.inspectit.cmr.dao.impl.PlatformIdentDaoImpl" init-method="initPlatformIdentCache"/>
	<bean id="platformSensorTypeIdentDao"
		class="info.novatec.inspectit.cmr.dao.impl.PlatformSensorTypeIdentDaoImpl" />
	<bean id="platformIdentCache"
		class="info.novatec.inspectit.cmr.util.PlatformIdentCache" />

	<bean id="defaultDataDao" class="info.novatec.inspectit.cmr.dao.impl.DefaultDataDaoImpl" >
		<property name="saveTimerDataToDatabase" value="${cmr.saveTimerDataToDatabase}" />
	</bean>

	<bean id="invocationDataDao"
		class="info.novatec.inspectit.cmr.dao.impl.BufferInvocationDataDaoImpl" />

	<bean id="sqlDataDao"
		class="info.novatec.inspectit.cmr.dao.impl.BufferSqlDataDaoImpl" />
	<bean id="exceptionSensorDataDao"
		class="info.novatec.inspectit.cmr.dao.impl.BufferExceptionSensorDataDaoImpl" />

	<bean id="combinedMetricsDataDao"
		class="info.novatec.inspectit.cmr.dao.impl.CombinedMetricsDataDaoImpl" />

	<bean id="environmentDataDao"
		class="info.novatec.inspectit.cmr.dao.ci.impl.EnvironmentDataDaoImpl" />
	<bean id="profileDataDao"
		class="info.novatec.inspectit.cmr.dao.ci.impl.ProfileDataDaoImpl" />
	<bean id="sensorTypeDataDao"
		class="info.novatec.inspectit.cmr.dao.ci.impl.SensorTypeDataDaoImpl" />
	<bean id="exceptionSensorDefinitionDataDao"
		class="info.novatec.inspectit.cmr.dao.ci.impl.ExceptionSensorDefinitionDataDaoImpl" />
	<bean id="methodSensorDefinitionDataDao"
		class="info.novatec.inspectit.cmr.dao.ci.impl.MethodSensorDefinitionDataDaoImpl" />
	<bean id="platformSensorDefinitionDataDao"
		class="info.novatec.inspectit.cmr.dao.ci.impl.PlatformSensorDefinitionDataDaoImpl" />
	<bean id="timerDataDao" 
		class="info.novatec.inspectit.cmr.dao.impl.BufferTimerDataDaoImpl" />
	<bean id="timerDataAggregator" class="info.novatec.inspectit.cmr.dao.impl.TimerDataAggregator">
		<property name="maxElements" value="200"/>
		<property name="aggregationPeriod" value="10000"/>
		<property name="cacheCleanSleepingPeriod" value="60000"/>
	</bean>

	<bean id="bufferProperties" class="info.novatec.inspectit.cmr.cache.impl.BufferProperties">
		<property name="evictionOccupancyPercentage" value="${buffer.evictionOccupancyPercentage}"/>
		<property name="maxHeapSizeOccupancy" value="${buffer.maxHeapSizeOccupancy}"/>
		<property name="minHeapSizeOccupancy" value="${buffer.minHeapSizeOccupancy}"/>
		<property name="maxHeapSizeOccupancyActiveFromHeapSize" value="${buffer.maxHeapSizeOccupancyActiveFromHeapSize}"/>
		<property name="minHeapSizeOccupancyActiveTillHeapSize" value="${buffer.minHeapSizeOccupancyActiveTillHeapSize}"/>
		<property name="minMemoryDelta" value="${buffer.minMemoryDelta}"/>
		<property name="maxObjectExpansionRate" value="${buffer.maxObjectExpansionRate}"/>
		<property name="minObjectExpansionRate" value="${buffer.minObjectExpansionRate}"/>
		<property name="maxObjectExpansionRateActiveTillBufferSize" value="${buffer.maxObjectExpansionRateActiveTillBufferSize}"/>
		<property name="minObjectExpansionRateActiveFromBufferSize" value="${buffer.minObjectExpansionRateActiveFromBufferSize}"/>
		<property name="bytesMaintenancePercentage" value="${buffer.bytesMaintenancePercentage}"/>
		<property name="evictionFragmentSizePercentage" value="${buffer.evictionFragmentSizePercentage}"/>	
		<property name="indexingTreeCleaningThreads" value="${buffer.indexingTreeCleaningThreads}"/>	
		<property name="indexingWaitTime" value="${buffer.indexingWaitTime}" />
	</bean>
	<bean id="bufferBean" class="info.novatec.inspectit.cmr.cache.impl.AtomicBuffer" />
	<bean id="bufferEvictor" class="info.novatec.inspectit.cmr.cache.impl.BufferEvictor" init-method="start"/>
	<bean id="bufferAnalyzer" class="info.novatec.inspectit.cmr.cache.impl.BufferAnalyzer" init-method="start"/>
	<bean id="bufferIndex" class="info.novatec.inspectit.cmr.cache.impl.BufferIndexer" init-method="start"/>

	<bean id="objectSizesFactory"
		class="info.novatec.inspectit.cmr.cache.impl.ObjectSizesFactory" />
	<bean id="rootBranchFactory"
		class="info.novatec.inspectit.cmr.cache.indexing.impl.RootBranchFactory" />
		
	<bean id="indexQueryProvider" class="info.novatec.inspectit.cmr.util.IndexQueryProvider">
		<lookup-method name="createNewIndexQuery" bean="indexQuery"/>
	</bean>
	<bean id="indexQuery"
		class="info.novatec.inspectit.cmr.cache.indexing.impl.IndexQuery"
		scope="prototype" lazy-init="true" />
	<bean id="restrictionProcessor"
		class="info.novatec.inspectit.cmr.cache.indexing.restriction.impl.CachingIndexQueryRestrictionProcessor" />
	
</beans>
